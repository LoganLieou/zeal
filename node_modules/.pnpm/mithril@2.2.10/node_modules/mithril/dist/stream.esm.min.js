var t=(r,s)=>{if(s!==n&&(r._v=s,4!==r._s)){e(r),r._s=2;for(var a=r._d.slice(),_=r._f.slice(),o=0;o<a.length;o++)4!==a[o]._s&&t(a[o],_[o](r._v))}return r._v},e=t=>{for(var r of(4!==t._s&&(t._s=3),t._d))e(r)},r=(t,e,r)=>{var n=r?s():s(e(t._v));return n._p.push(t),t._d.push(n),t._f.push(e),n},s=(...e)=>{var r=(...e)=>t(r,e.length?e[0]:n);return Object.setPrototypeOf(r,s.prototype),r._s=e.length&&e[0]!==n?2:1,r._v=e.length?e[0]:void 0,r._d=[],r._f=[],r._p=[],r._e=null,r};s["fantasy-land/of"]=s,s.prototype=Object.create(Function.prototype,Object.getOwnPropertyDescriptors({constructor:s,map(t){return r(this,t,2!==this._s)},"fantasy-land/ap"(t){return a(()=>(0,t._v)(this._v),[t,this])},toJSON(){var t=this._v;return null!=t&&"function"==typeof t.toJSON?t.toJSON():t},get end(){return this._e||(this._e=s(),r(this._e,t=>{if(!0===t){for(var e of this._p){var r=e._d.indexOf(this);r>=0&&(e._d.splice(r,1),e._f.splice(r,1))}this._s=4,this._p.length=this._d.length=this._f.length=0}return t},!0)),this._e}})),s.prototype["fantasy-land/map"]=s.prototype.map;var n=s.SKIP={},a=s.combine=(e,n)=>{if(n.some(t=>t.constructor!==s))throw new Error("Ensure that each item passed to stream.combine/stream.merge/lift is a stream.");var a=n.every(t=>2===t._s),_=a?s(e(n)):s(),o=[],i=n.map(s=>r(s,r=>(o.push(s),(a||n.every(t=>1!==t._s))&&(a=!0,t(_,e(o)),o=[]),r),!0)),p=_.end.map(t=>{if(!0===t){for(var e of i)e.end(!0);p.end(!0)}});return _};s.merge=t=>a(()=>t.map(t=>t._v),t),s.scan=(e,s,a)=>{var _=r(a,t=>{var r=e(s,t);return r!==n&&(s=r),r},2!==a._s);return t(_,s),_},s.scanMerge=(e,r)=>{var s=e.map(t=>t[0]),n=a(t=>{for(var n=0;n<s.length;n++)t.includes(s[n])&&(r=e[n][1](r,s[n]._v));return r},s);return t(n,r),n},s.lift=(t,...e)=>a(()=>t(...e.map(t=>t._v)),e);export{s as default};
//# sourceMappingURL=stream.esm.min.js.map
